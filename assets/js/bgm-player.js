(()=>{const e=document.getElementById("bgm-toggle"),t=document.getElementById("bgm-audio");if(!e||!t)return;const a="bgm-enabled",l=t=>{e.setAttribute("aria-pressed",t?"true":"false"),e.querySelector(".bgm-label").textContent=t?"Pause BGM":"Play BGM"};e.addEventListener("click",async()=>{if(t.paused)try{await t.play(),localStorage.setItem(a,"1"),l(!0)}catch(e){l(!1)}else t.pause(),localStorage.setItem(a,"0"),l(!1)}),"1"===localStorage.getItem(a)?t.play().then(()=>l(!0)).catch(()=>l(!1)):l(!1)})();